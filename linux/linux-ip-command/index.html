<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Linux ip 命令与示例 | 不争笔记 </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.55.5" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.7f5826ffc55f9648322d65251a32bac8.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="Linux ip 命令与示例" />
<meta property="og:description" content="ip 命令是用于配置网络接口的强大工具，任何 Linux 系统管理员应该知道和使用它。它可用于启用或者禁用网卡接口，分配和删除地址以及路由管理 ARP 缓存等等。

在本教程中，我们将通过实际示例和最常见的选项的详细说明向您展示如何使用 ip 命令。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/linux/linux-ip-command/" />
<meta property="article:published_time" content="2019-04-16T07:00:00&#43;08:00"/>
<meta property="article:modified_time" content="2019-04-16T07:00:00&#43;08:00"/>

<meta itemprop="name" content="Linux ip 命令与示例">
<meta itemprop="description" content="ip 命令是用于配置网络接口的强大工具，任何 Linux 系统管理员应该知道和使用它。它可用于启用或者禁用网卡接口，分配和删除地址以及路由管理 ARP 缓存等等。

在本教程中，我们将通过实际示例和最常见的选项的详细说明向您展示如何使用 ip 命令。">


<meta itemprop="datePublished" content="2019-04-16T07:00:00&#43;08:00" />
<meta itemprop="dateModified" content="2019-04-16T07:00:00&#43;08:00" />
<meta itemprop="wordCount" content="609">



<meta itemprop="keywords" content="ip,terminal," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux ip 命令与示例"/>
<meta name="twitter:description" content="ip 命令是用于配置网络接口的强大工具，任何 Linux 系统管理员应该知道和使用它。它可用于启用或者禁用网卡接口，分配和删除地址以及路由管理 ARP 缓存等等。

在本教程中，我们将通过实际示例和最常见的选项的详细说明向您展示如何使用 ip 命令。"/>

  </head>

  <body class="ma0 avenir bg-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      不争笔记
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/babylonjs/" title="BabylonJS 教程 page">
              BabylonJS 教程
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/linux/" title="Linux 教程 page">
              Linux 教程
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/post/" title="博文 page">
              博文
            </a>
          </li>
          
        </ul>
      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        LINUX 教程
      </p>
      
      <h1 class="f2 athelas mb1">Linux ip 命令与示例</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2019-04-16T07:00:00&#43;08:00">April 16, 2019</time>      
      
      
    </header>

    
    <section class="nested-copy-line-height lh-copy f45 nested-links nested-img mid-gray pr4-l w-two-thirds-l">
      <div class="markdown"><p>ip 命令是用于配置网络接口的强大工具，任何 Linux 系统管理员应该知道和使用它。它可用于启用或者禁用网卡接口，分配和删除地址以及路由管理 ARP 缓存等等。</p>

<p>在本教程中，我们将通过实际示例和最常见的选项的详细说明向您展示如何使用 ip 命令。</p>

<h2 id="如何使用-ip-命令">如何使用 ip 命令</h2>

<p>ip 实用程序是安装在所有现代 Linux 发行版上的 iproute2 软件包的一部分。</p>

<p>ip 命令的语法如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">ip <span class="o">[</span> OPTIONS <span class="o">]</span> OBJECT <span class="o">{</span> COMMAND <span class="p">|</span> <span class="nb">help</span> <span class="o">}</span></code></pre></div>
<p><img src="/images/linux/linux-ip-command/linux-ip-command.jpg" alt="" /></p>

<p>OBJECT 是您要管理的对象类型。最常用的对象(或子命令)是：</p>

<ul>
<li><code>link</code>(<code>l</code>) - 显示和修改网络接口。</li>
<li><code>address</code>(<code>a</code>) - 显示和修改 IP 地址。</li>
<li><code>route</code>(<code>r</code>) - 显示和更改路由表。</li>
<li><code>neigh</code>(<code>n</code>) - 显示和操作邻居对象( ARP 表)。</li>
</ul>

<p>该对象可以以完整或缩写(短)形式书写。 <code>ip OBJECT help</code> 可以显示每个对象类型每个子命令的命令和参数列表。</p>

<p>配置网络接口时，必须以 root 用户或用户使用 sudo 权限运行命令，否则将打印  <code>RTNETLINK answers: Operation not permitted</code></p>

<p>使用 ip 命令设置的配置不是持久的。系统重启后，所有更改都将丢失。对于永久设置，您需要编辑特定于发行版的配置文件或将命令添加到启动脚本。</p>

<h2 id="显示和修改-ip-地址">显示和修改 IP 地址</h2>

<p>使用 <code>addr</code> 对象操作时，命令采用以下形式：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">ip addr <span class="o">[</span> COMMAND <span class="o">]</span> ADDRESS dev IFNAME</code></pre></div>
<p>最常用的 <code>addr</code> 对象 COMMANDS  是 show ， add 和 del 。</p>

<h3 id="显示有关所有-ip-地址的信息">显示有关所有 IP 地址的信息</h3>

<p>要显示所有网络接口的列表以及关联的 IP 地址，请键入以下命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip addr show</code></pre></div>
<p>输出看起来像这样：</p>
<div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 52:54:00:8c:62:44 brd ff:ff:ff:ff:ff:ff
    inet 192.168.121.241/24 brd 192.168.121.255 scope global dynamic eth0
       valid_lft 2900sec preferred_lft 2900sec
    inet6 fe80::5054:ff:fe8c:6244/64 scope link 
       valid_lft forever preferred_lft forever</code></pre></div>
<p><code>show</code> 命令将列出所有设备。如果输入 <code>ip addr</code> 您将获得相同的输出。</p>

<p>如果您只想显示 <code>IPv4</code> 或 <code>IPv6</code> IP 地址使用 <code>ip -4 addr</code> 或 <code>ip -6 addr</code> 。</p>

<h3 id="显示有关单个网络接口的信息">显示有关单个网络接口的信息</h3>

<p>获取有关特定网络接口的信息， <code>ip addr show dev</code> 然后使用设备名称。例如，要查询 <code>eth0</code> 您将键入：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip addr show dev eth0</code></pre></div>
<h3 id="为接口分配-ip-地址">为接口分配 IP 地址</h3>

<p>要为接口分配 IP 地址，请使用以下语法：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">ip addr add ADDRESS dev IFNAME</code></pre></div>
<p>其中 <code>IFNAME</code> 是接口名称， <code>ADDRESS</code> 是您要分配给接口的 IP 地址。</p>

<p>要将 <code>192.168.121.45</code> 子网掩码为 <code>24</code> 的地址添加到设备 eth0 ，您可以键入：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo ip address add 192.168.121.45/24 dev eth0</code></pre></div>
<p>成功时，该命令不会显示任何输出。如果界面不存在，您将获得 <code>Cannot find device &quot;eth0&quot;</code>。</p>

<h3 id="为同一接口分配多个-ip-地址">为同一接口分配多个 IP 地址</h3>

<p>使用 ip 实用程序，您可以为同一接口分配多个地址。例如：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo ip address add 192.168.121.241/24 dev eth0
sudo ip address add 192.168.121.45/24 dev eth0</code></pre></div>
<p>要确认 IP 是否已分配，请键入： <code>ip -4 addr show dev eth0</code> 或 <code>ip -4 a show dev eth0</code> ：</p>
<div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    inet 192.168.121.241/24 brd 192.168.121.255 scope global dynamic eth0
       valid_lft 3515sec preferred_lft 3515sec
    inet 192.168.121.45/24 scope global secondary eth0
       valid_lft forever preferred_lft forever</code></pre></div>
<h3 id="从网络接口中删除-ip-地址">从网络接口中删除 IP 地址</h3>

<p>从接口中删除 IP 地址的语法如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">ip addr dev ADDRESS dev IFNAME</code></pre></div>
<p><code>IFNAME</code> <code>是接口名称，ADDRESS</code> 是您要从接口中删除的 IP 地址。</p>

<p>要从设备 eth0 中 <code>192.168.121.45/24</code> 删除地址，请键入：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo ip address del 192.168.121.45/24 dev eth0</code></pre></div>
<h2 id="显示和修改网络接口">显示和修改网络接口</h2>

<p>要管理和显示网络接口的状态，请使用该 <code>link</code> 对象。</p>

<p>与工作时，最常用的命令 <code>link</code> 对象 <code>show</code> ， <code>set</code> ， <code>add</code> 和 <code>del</code> 。</p>

<h3 id="显示有关网络接口的信息">显示有关网络接口的信息</h3>

<p>要显示所有网络接口的列表，请键入以下命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip link show</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:8c:62:44 brd ff:ff:ff:ff:ff:ff</code></pre></div>
<p>与此不同 <code>ip addr show</code> ， <code>ip link show</code> 不会打印有关与设备关联的 IP 地址的信息。</p>

<p>获取有关特定网络接口的信息， 使用 <code>ip link show dev</code> 后跟设备名称。例如，要查询 <code>eth0</code> 您将键入：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip link show dev eth0</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:8c:62:44 brd ff:ff:ff:ff:ff:ff</code></pre></div>
<h2 id="更改接口启用或关闭的状态">更改接口启用或关闭的状态</h2>

<p>要启用或关闭接口，请使用 <code>ip link set dev</code> 设备名称和所需状态：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">ip link <span class="nb">set</span> dev <span class="o">{</span>DEVICE<span class="o">}</span> <span class="o">{</span>up<span class="p">|</span>down<span class="o">}</span></code></pre></div>
<p>例如，要使接口 eth0 联机，您可以键入：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip link set eth0 up</code></pre></div>
<p>如果禁用就使用:</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip link set eth0 down</code></pre></div>
<h2 id="显示和更改路由表">显示和更改路由表</h2>

<p>要分配，删除和显示内核路由表，请使用 <code>route</code> 对象。使用 routes 对象时最常用的命令是 <code>list</code> ， <code>add</code> 和 <code>del</code> 。</p>

<h3 id="显示路由表">显示路由表</h3>

<p>要列表显示内核路由条目使用以下命令之一：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">ip route
ip route list
ip route list SELECTOR</code></pre></div>
<p>在没有 SELECTOR 的情况下使用时，该命令将列出内核中的所有路由条目：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip route list</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">default via 192.168.121.1 dev eth0 proto dhcp src 192.168.121.241 metric 100 
192.168.121.0/24 dev eth0 proto kernel scope link src 192.168.121.241 
192.168.121.1 dev eth0 proto dhcp scope link src 192.168.121.241 metric 100 </code></pre></div>
<p>例如，要显示特定网络的路由， <code>172.17.0.0/16</code> 您可以键入：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip r list 172.17.0.0/16</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 linkdown </code></pre></div>
<h3 id="添加新路由">添加新路由</h3>

<p>要向路由表添加新条目，请使用 <code>route add</code> 命令后跟网络或设备名称。</p>

<p>要添加一条路由： <code>192.168.121.0/24</code> 通过网关 <code>192.168.121.1</code></p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip route add 192.168.121.0/24 via 192.168.121.1</code></pre></div>
<p>要添加一条路由：在设备 <code>eth0</code> 上可以到达 <code>192.168.121.0/24</code> 。</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip route add 192.168.121.0/24 dev eth0</code></pre></div>
<p>添加默认路由使用 <code>default</code> 关键字。以下命令将添加默认路由在设备 eth0 上可通过本地网关 <code>192.168.121.1</code> 访问。</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip route add default via 192.168.121.1 dev eth0</code></pre></div>
<h3 id="删除路线">删除路线</h3>

<p>要从路由表中删除条目，请使用 <code>route add</code> 命令，删除路由的语法与添加的相同。</p>

<p>以下命令将删除默认路由：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip route del default</code></pre></div>
<p>删除 <code>192.168.121.0/24</code> 通过网关 <code>192.168.121.1</code> 的路由</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ip route add 192.168.121.0/24 via 192.168.121.1</code></pre></div>
<h2 id="结论">结论</h2>

<p>到目前为止，您应该很好地理解如何使用 Linux ip 命令。有关其他 ip 选项的更多信息，请访问 <a href="https://linux.die.net/man/8/ip">ip 命令手册页</a>。</p></div>


<div class="ph3 tags">
  
  <a class="f6 link dim br2 ph3 pv2 mb2 dib white-90 bg-black" href="#0">ip</a>
  
  <a class="f6 link dim br2 ph3 pv2 mb2 dib white-90 bg-black" href="#0">terminal</a>
  
</div><div class="mt6">
        
      </div>
    </section>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">相关阅读</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/linux/how-to-install-rpm-packages-on-centos/">如何在 CentOS 上安装 RPM 软件包</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-set-and-list-environment-variables-in-linux/">如何在 Linux 中设置和查看环境变量</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-check-linux-version/">如何检查 Linux 版本</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-get-size-of-file-directory-linux/">如何在 Linux 中获取目录的大小</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-install-and-use-curl-on-ubuntu-18-04/">如何在 Ubuntu 18.04 上安装和使用 curl</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-list-users-in-linux/">如何在 Linux 中查看用户列表</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-use-rsync-for-local-and-remote-data-transfer-and-synchronization/">如何使用 rsync 进行本地和远程数据传输和同步</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/get-cpu-information-on-linux/">获取 Linux 上的 CPU 信息</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/bash-concatenate-strings/">在 Bash 中拼接字符串</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-configure-static-ip-address-on-ubuntu-18-04/">如何在 Ubuntu 18.04 上配置静态 IP 地址</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/bash-check-if-file-exists/">Bash 中如何检查文件或目录是否存在</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="/" >
    &copy; 2019 不争笔记
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
