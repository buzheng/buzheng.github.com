<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>如何在 CentOS 7 上安装和使用 Docker |  不争笔记</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.62.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.c82345eb542d5eac3fb4abd80d78ec42.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="如何在 CentOS 7 上安装和使用 Docker" />
<meta property="og:description" content="Docker 是一种容器化技术，允许您快速构建，测试和部署应用程序；Docker 是便携式、自给自足的容器，几乎可以在任何地方运行。
在本教程中，我们将介绍如何在 CentOS 7 上安装 Docker 社区版并探索基本的 Docker 概念和命令。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://buzheng.org/linux/how-to-install-and-use-docker-on-centos-7/" />
<meta property="article:published_time" content="2019-03-15T06:00:00+08:00" />
<meta property="article:modified_time" content="2019-03-15T06:00:00+08:00" />
<meta itemprop="name" content="如何在 CentOS 7 上安装和使用 Docker">
<meta itemprop="description" content="Docker 是一种容器化技术，允许您快速构建，测试和部署应用程序；Docker 是便携式、自给自足的容器，几乎可以在任何地方运行。
在本教程中，我们将介绍如何在 CentOS 7 上安装 Docker 社区版并探索基本的 Docker 概念和命令。">
<meta itemprop="datePublished" content="2019-03-15T06:00:00&#43;08:00" />
<meta itemprop="dateModified" content="2019-03-15T06:00:00&#43;08:00" />
<meta itemprop="wordCount" content="1915">



<meta itemprop="keywords" content="centos,docker," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="如何在 CentOS 7 上安装和使用 Docker"/>
<meta name="twitter:description" content="Docker 是一种容器化技术，允许您快速构建，测试和部署应用程序；Docker 是便携式、自给自足的容器，几乎可以在任何地方运行。
在本教程中，我们将介绍如何在 CentOS 7 上安装 Docker 社区版并探索基本的 Docker 概念和命令。"/>

  </head>

  <body class="ma0 sans-serif bg-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://buzheng.org" class="f3 fw4 hover-white no-underline white-90 dib">
      不争笔记
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3 mv0">
          
          <li class="list f5 fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/babylonjs/" title="BabylonJS 教程 page">
              BabylonJS 教程
            </a>
          </li>
          
          <li class="list f5 fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/linux/" title="Linux 教程 page">
              Linux 教程
            </a>
          </li>
          
          <li class="list f5 fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/post/" title="博文 page">
              博文
            </a>
          </li>
          
        </ul>
      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mv4 w-100">
      <h1 class="f2 mb3">如何在 CentOS 7 上安装和使用 Docker</h1>
      <div class="gray">
      
        <time class="f6 dib tracked" datetime="2019-03-15T06:00:00&#43;08:00">2019年3月15日</time>
        
        
          <span class="mh2 f7">•</span>
          <span class="f6 dib tracked">约 2000 字</span>
          <span class="f6 dib tracked">, 预计阅读时间 6 分钟</span>
        
      </div>
    </header>
    
    <section class="nested-copy-line-height lh-copy f4 nested-links nested-img dark-gray w-70-l pr3">
      <div class="x-md">
          
          
          
  
          
          
          
  
          <p>Docker 是一种容器化技术，允许您快速构建，测试和部署应用程序；Docker 是便携式、自给自足的容器，几乎可以在任何地方运行。</p>
<p>在本教程中，我们将介绍如何在 CentOS 7 上安装 Docker 社区版并探索基本的 Docker 概念和命令。</p>
<h2 id="先决条件">先决条件</h2>
<p>在继续本教程之前，请确保满足以下先决条件：</p>
<ul>
<li>CentOS 7 服务器</li>
<li>您拥有具有 sudo 权限的非 root 用户。您可以查看教程了解<a href="/linux/create-a-sudo-user-on-centos/">如何创建新的 sudo 用户</a>。</li>
</ul>
<h2 id="在-centos-上安装-docker">在 CentOS 上安装 Docker</h2>
<p>虽然 Docker 软件包在官方 CentOS 7 软件仓库中可用，但它可能并不是最新版本。我们推荐从 Docker 的软件仓库安装最新版本的 Docker 。</p>
<p>请按照以下步骤在 CentOS 7 服务器上安装 Docker ：</p>
<ol>
<li>
<p>首先更新系统包并安装所需的依赖项：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo yum update
sudo yum install yum-utils device-mapper-persistent-data lvm2
</code></pre></div></li>
<li>
<p>接下来，运行以下命令，将 Docker 软件仓库添加到您的系统：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
</code></pre></div></li>
<li>
<p>现在已启用了 Docker 软件仓库，请输入以下命令，使用 <code>yum</code> 安装最新版本的 Docker CE (社区版)：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo yum install docker-ce
</code></pre></div></li>
<li>
<p>安装 Docker 软件包后，启动 Docker 守护程序并使其在系统引导时自动启动：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo systemctl start docker
sudo systemctl <span class="nb">enable</span> docker
</code></pre></div></li>
<li>
<p>要验证 Docker 服务是否正在运行，请输入：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo systemctl status docker
</code></pre></div><p>输出应该如下所示：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">● docker.service - Docker Application Container Engine
  Loaded: loaded <span class="o">(</span>/usr/lib/systemd/system/docker.service<span class="p">;</span> enabled<span class="p">;</span> vendor preset: disabled<span class="o">)</span>
  Active: active <span class="o">(</span>running<span class="o">)</span> since Wed 2018-10-31 08:51:20 UTC<span class="p">;</span> 7s ago
    Docs: https://docs.docker.com
Main PID: <span class="m">2492</span> <span class="o">(</span>dockerd<span class="o">)</span>
  CGroup: /system.slice/docker.service
          ├─2492 /usr/bin/dockerd
          └─2498 docker-containerd --config /var/run/docker/containerd/containerd.toml
</code></pre></div></li>
<li>
<p>在撰写本文时，Docker 的当前稳定版本是 18.06.1, 通过以下命令打印 Docker 版本：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker -v
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Docker version 18.06.1-ce, build e68fc7a
</code></pre></div></li>
</ol>
<h2 id="在没有-sudo-的情况下执行-docker-命令">在没有 sudo 的情况下执行 Docker 命令</h2>
<p>默认情况下，管理 Docker 需要管理员权限。如果要以既不是 root 用户也不是 sudo 用户身份运行 Docker 命令，则需要<!-- raw HTML omitted -->将用户添加到 docker 用户组中<!-- raw HTML omitted -->，该 docker 用户组是在安装 Docker CE 软件包期间创建的。您可以输入以下命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo usermod -aG docker <span class="nv">$USER</span>
</code></pre></div><p>注销并重新登录，以便刷新组成员身份。</p>
<p>要验证 Docker 是否已成功安装并且您可以在不使用 sudo 的情况下运行 docker 命令，请发出以下命令，该命令将下载测试镜像，并在容器中运行，打印 “Hello from Docker” 消息并退出：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker container run hello-world
</code></pre></div><p>输出应如下所示：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Unable to find image <span class="s1">&#39;hello-world:latest&#39;</span> locally
latest: Pulling from library/hello-world
9bb5a5d4561a: Pull <span class="nb">complete</span>
Digest: sha256:f5233545e43561214ca4891fd1157e1c3c563316ed8e237750d59bde73361e77
Status: Downloaded newer image <span class="k">for</span> hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.
</code></pre></div><h2 id="docker-命令行界面">Docker 命令行界面</h2>
<p>现在我们已经安装了 Docker ，让我们来看看 docker CLI 的基本语法。</p>
<p>docker 命令行采用以下形式：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker <span class="o">[</span>option<span class="o">]</span> <span class="o">[</span>subcommand<span class="o">]</span> <span class="o">[</span>arguments<span class="o">]</span>
</code></pre></div><p>您可以通过运行不带参数 <code>docker</code> 命令来列出所有可用命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker
</code></pre></div><p>如果您需要 <code>[subcommand]</code> 的更多帮助，只需输入：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker <span class="o">[</span>subcommand<span class="o">]</span> --help
</code></pre></div><h2 id="docker-镜像">Docker 镜像</h2>
<p>一个 Docker 镜像由一系列位于镜像的 Dockerfile 中表示指令的层组成。 一个镜像的 Dockerfile 组成一个可执行的软件应用。一个镜像是一个不可变的二进制文件，包括应用程序和运行应用程序所需的所有其他依赖项，如二进制文件，库和指令。简而言之， Docker 镜像本质上是 Docker 容器的快照。</p>
<p>Docker Hub 是基于云的注册服务，其中包括将 Docker 镜像保存在公共或私有软件仓库中的功能。</p>
<p>要在 Docker Hub 软件仓库中搜索镜像，只需使用 <code>search</code> 子命令。例如，要搜索 CentOS 镜像，请运行：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker search centos
</code></pre></div><p>输出应如下所示：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">NAME                               DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
centos                             The official build of CentOS.                   <span class="m">4257</span>                <span class="o">[</span>OK<span class="o">]</span>
ansible/centos7-ansible            Ansible on Centos7                              <span class="m">109</span>                                     <span class="o">[</span>OK<span class="o">]</span>
jdeathe/centos-ssh                 CentOS-6 6.9 x86_64 / CentOS-7 7.4.1708 x86_…   <span class="m">94</span>                                      <span class="o">[</span>OK<span class="o">]</span>
consol/centos-xfce-vnc             Centos container with <span class="s2">&#34;headless&#34;</span> VNC session…   <span class="m">52</span>                                      <span class="o">[</span>OK<span class="o">]</span>
imagine10255/centos6-lnmp-php56    centos6-lnmp-php56                              <span class="m">40</span>                                      <span class="o">[</span>OK<span class="o">]</span>
tutum/centos                       Simple CentOS docker image with SSH access      <span class="m">39</span>
</code></pre></div><p>正如你可以看到搜索结果打印的表格有 5 列: <code>NAME</code>, <code>DESCRIPTION</code>, <code>STARS</code>, <code>OFFICIAL</code> 和 <code>AUTOMATED</code> 。官方镜像是 Docker 与上游合作伙伴共同开发的镜像。</p>
<p>如果我们想下载 CentOS 7 的官方版本，我们可以使用 <code>image pull</code> 子命令来实现：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker image pull centos
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Using default tag: latest
latest: Pulling from library/centos
469cfcc7a4b3: Pull <span class="nb">complete</span>
Digest: sha256:989b936d56b1ace20ddf855a301741e52abca38286382cba7f44443210e96d16
Status: Downloaded newer image <span class="k">for</span> centos:latest
</code></pre></div><p>根据您的 Internet 速度，下载可能需要几秒钟或几分钟。下载镜像后，我们可以列出镜像：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker image ls
</code></pre></div><p>输出应如下所示：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
hello-world         latest              e38bc07ac18e        <span class="m">3</span> weeks ago         1.85kB
centos              latest              e934aafc2206        <span class="m">4</span> weeks ago         199MB
</code></pre></div><p>如果由于某种原因您要删除镜像，可以使用 <code>image rm [image_name]</code> 子命令执行此操作：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker image rm centos
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Untagged: centos:latest
Untagged: centos@sha256:989b936d56b1ace20ddf855a301741e52abca38286382cba7f44443210e96d16
Deleted: sha256:e934aafc22064b7322c0250f1e32e5ce93b2d19b356f4537f5864bd102e8531f
Deleted: sha256:43e653f84b79ba52711b0f726ff5a7fd1162ae9df4be76ca1de8370b8bbf9bb0
</code></pre></div><h2 id="docker-容器">Docker 容器</h2>
<p>镜像的实例称为容器。一个容器表示单个应用程序，进程或服务的运行时。</p>
<p>举一个可能不是最合适的类比：如果您是程序员，您可以将 Docker 镜像视为类，将 Docker 容器视为类的一个实例。</p>
<p>我们可以使用 <code>docker container</code> 子命令启动，停止，删除和管理容器。</p>
<p>以下命令将基于 CentoOS 镜像启动 Docker 容器。如果您本地没有镜像，它将首先下载它：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker container run centos
</code></pre></div><p>乍一看，根本没有任何事情发生。嗯，那不是真的。 CentOS 容器在启动后立即停止了，因为它没有长时间运行的进程，我们没有提供任何命令，因此容器启动，运行空命令然后退出。</p>
<p>选项 <code>-it</code> 允许我们通过命令行与容器进行交互。要启动一个可交互的容器：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker container run -it centos /bin/bash
</code></pre></div><p>正如您在容器启动时从输出中看到的那样，命令提示符已更改，这意味着您现在正在从容器内部进行操作：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>root@719ef9304412 /<span class="o">]</span>#
</code></pre></div><p>要列出活动容器，请输入：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker container ls
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
79ab8e16d567        centos              <span class="s2">&#34;/bin/bash&#34;</span>         <span class="m">22</span> minutes ago      Up <span class="m">22</span> minutes                           ecstatic_ardinghelli
</code></pre></div><blockquote>
<p>如果您没有任何正在运行的容器，则输出将为空。</p>
</blockquote>
<p>要查看活动和非活动容器，请使用选项 <code>-a</code> ：</p>
<!-- raw HTML omitted -->
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker container ls -a
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                      PORTS               NAMES
79ab8e16d567        centos              <span class="s2">&#34;/bin/bash&#34;</span>              <span class="m">22</span> minutes ago      Up <span class="m">22</span> minutes                                   ecstatic_ardinghelli
c55680af670c        centos              <span class="s2">&#34;/bin/bash&#34;</span>              <span class="m">30</span> minutes ago      Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">30</span> minutes ago                       modest_hawking
c6a147d1bc8a        hello-world         <span class="s2">&#34;/hello&#34;</span>                 <span class="m">20</span> hours ago        Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">20</span> hours ago                         sleepy_shannon
</code></pre></div><p>要删除一个或多个容器，只需从上面复制容器 ID （或多个 ID）并将其粘贴到 <code>container rm</code> 子命令之后：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">docker container rm c55680af670c
</code></pre></div><p>结论
您已经学习了如何在 CentOS 7 机器上安装 Docker 以及如何下载 Docker 镜像和管理 Docker 容器。您可能还想了解 <!-- raw HTML omitted -->Docker Compose<!-- raw HTML omitted --> ，它允许您定义和运行多容器 Docker 应用程序。</p>
<p>本教程几乎没有涉及 Docker 生态系统的表面。在我们的下一篇文章中，我们将继续深入探讨 Docker 的其他方面。要了解有关 Docker 的更多信息，请查看<a href="https://docs.docker.com/">官方 Docker 文档</a>。</p>
      </div><ul class="pa0">
  
   <li class="list di">
     <a href="/tags/centos" class="link f5 grow no-underline br2 ba ph3 pv2 mb3 mr2 dib white bg-white sans-serif">centos</a>
   </li>
  
   <li class="list di">
     <a href="/tags/docker" class="link f5 grow no-underline br2 ba ph3 pv2 mb3 mr2 dib white bg-white sans-serif">docker</a>
   </li>
  
</ul>
<div class="mt6">
        
      </div>
    </section>

    <aside class="w-30-l">




  <div class="x-related bg-near-white pa3 pb1 nested-copy-line-height nested-links mb3">
    <p class="f5 mb3 mt0">相关阅读</p>
    <ul class="pa0 list">
	   
	     <li  class="mv1 truncate">
          <a href="/linux/how-to-install-node-js-on-centos-7/">如何在 CentOS 7 上安装 Node.js 和 npm</a>
        </li>
	    
	     <li  class="mv1 truncate">
          <a href="/linux/how-to-install-apache-on-centos-7/">如何在 CentOS 7 上安装 Apache</a>
        </li>
	    
	     <li  class="mv1 truncate">
          <a href="/linux/how-to-deploy-mattermost-on-centos-7/">如何在 CentOS 7 上部署 Mattermost</a>
        </li>
	    
	     <li  class="mv1 truncate">
          <a href="/linux/create-a-sudo-user-on-centos/">如何在 CentOS 上创建 sudo 用户</a>
        </li>
	    
	     <li  class="mv1 truncate">
          <a href="/linux/how-to-deploy-rocket-chat-on-centos-7/">如何在 CentOS 7 上部署 Rocket.Chat</a>
        </li>
	    
	     <li  class="mv1 truncate">
          <a href="/linux/how-to-install-tomcat-8-5-on-centos-7/">如何在 CentOS 7 上安装 Tomcat 8.5</a>
        </li>
	    
	     <li  class="mv1 truncate">
          <a href="/linux/install-odoo-11-on-centos-7/">在 CentOS 7 上安装 Odoo 11</a>
        </li>
	    
	     <li  class="mv1 truncate">
          <a href="/linux/configure-magento-2-to-use-varnish-on-centos-7/">在 CentOS 7 上配置 Magento 2 使用 Varnish</a>
        </li>
	    
	     <li  class="mv1 truncate">
          <a href="/linux/install-java-on-centos-7/">如何在 CentOS 7 上安装 Java</a>
        </li>
	    
	     <li  class="mv1 truncate">
          <a href="/linux/install-magento-2-on-centos-7/">在 CentOS 7 上安装 Magento 2</a>
        </li>
	    
    </ul>
</div>

<div class="sticky">
  <div class="x-toc bg-near-white pa3 pb1 nested-list-reset nested-links f5">
    <p class="f5 mb3 mt0">文章目录</p>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#先决条件">先决条件</a></li>
    <li><a href="#在-centos-上安装-docker">在 CentOS 上安装 Docker</a></li>
    <li><a href="#在没有-sudo-的情况下执行-docker-命令">在没有 sudo 的情况下执行 Docker 命令</a></li>
    <li><a href="#docker-命令行界面">Docker 命令行界面</a></li>
    <li><a href="#docker-镜像">Docker 镜像</a></li>
    <li><a href="#docker-容器">Docker 容器</a></li>
  </ul>
</nav>
  </div>
  </div></aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://buzheng.org" >
    &copy; 2020 不争笔记
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
