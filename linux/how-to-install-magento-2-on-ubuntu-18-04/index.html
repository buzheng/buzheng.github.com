<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>如何在Ubuntu 18.04上安装Magento 2 |  不争笔记</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.55.6" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="/dist/css/app.14a5afa4a985b822d0a94ed3fe0d14ac.css" rel="stylesheet">
    

    

    
      
    

    

    <meta property="og:title" content="如何在Ubuntu 18.04上安装Magento 2" />
<meta property="og:description" content="Magento是领先的开源技术的企业级电子商务平台，结合了强大的功能，灵活性和用户友好的界面。

借助Engaging Shopping Experiences，灵活的模块化架构和企业级可扩展性和性能等功能Magento是大多数在线商家的首选平台。

在本教程中，我们将向您展示如何在Ubuntu 18.04计算机上安装Magento 2.3。我们将使用Nginx作为Web服务器，最新的PHP 7.2和MySQL / MariaDB作为数据库服务器。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/linux/how-to-install-magento-2-on-ubuntu-18-04/" />
<meta property="article:published_time" content="2019-05-09T05:00:00&#43;08:00"/>
<meta property="article:modified_time" content="2019-05-09T05:00:00&#43;08:00"/>

<meta itemprop="name" content="如何在Ubuntu 18.04上安装Magento 2">
<meta itemprop="description" content="Magento是领先的开源技术的企业级电子商务平台，结合了强大的功能，灵活性和用户友好的界面。

借助Engaging Shopping Experiences，灵活的模块化架构和企业级可扩展性和性能等功能Magento是大多数在线商家的首选平台。

在本教程中，我们将向您展示如何在Ubuntu 18.04计算机上安装Magento 2.3。我们将使用Nginx作为Web服务器，最新的PHP 7.2和MySQL / MariaDB作为数据库服务器。">


<meta itemprop="datePublished" content="2019-05-09T05:00:00&#43;08:00" />
<meta itemprop="dateModified" content="2019-05-09T05:00:00&#43;08:00" />
<meta itemprop="wordCount" content="572">



<meta itemprop="keywords" content="ubuntu,magento,mysql,mariadb,php,nginx,composer,ecommerce," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="如何在Ubuntu 18.04上安装Magento 2"/>
<meta name="twitter:description" content="Magento是领先的开源技术的企业级电子商务平台，结合了强大的功能，灵活性和用户友好的界面。

借助Engaging Shopping Experiences，灵活的模块化架构和企业级可扩展性和性能等功能Magento是大多数在线商家的首选平台。

在本教程中，我们将向您展示如何在Ubuntu 18.04计算机上安装Magento 2.3。我们将使用Nginx作为Web服务器，最新的PHP 7.2和MySQL / MariaDB作为数据库服务器。"/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      不争笔记
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/babylonjs/" title="BabylonJS 教程 page">
              BabylonJS 教程
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/linux/" title="Linux 教程 page">
              Linux 教程
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/post/" title="博文 page">
              博文
            </a>
          </li>
          
        </ul>
      
      











    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      
      <h1 class="f1 athelas mb1">如何在Ubuntu 18.04上安装Magento 2</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2019-05-09T05:00:00&#43;08:00">May 9, 2019</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy f45 nested-links nested-img mid-gray pr4-l w-two-thirds-l">
      <div class="x-md"><p><a href="https://magento.com/">Magento</a>是领先的开源技术的企业级电子商务平台，结合了强大的功能，灵活性和用户友好的界面。</p>

<p>借助Engaging Shopping Experiences，灵活的模块化架构和企业级可扩展性和性能等功能Magento是大多数在线商家的首选平台。</p>

<p>在本教程中，我们将向您展示如何在Ubuntu 18.04计算机上安装Magento 2.3。我们将使用Nginx作为Web服务器，最新的PHP 7.2和MySQL / MariaDB作为数据库服务器。</p>

<h2 id="先决条件">先决条件</h2>

<p>在继续本教程之前，请确保满足以下先决条件：</p>

<ul>
<li>有一个指向您的公共服务器IP的域名。我们会用<code>example.com</code>。</li>
<li>按照<a href="/linux/how-to-install-nginx-on-ubuntu-18-04/">这些说明</a>在您的Ubuntu服务器上安装Nginx 。</li>
<li>为您的域安装的SSL证书，用于加密用户的信息。您可以按照<a href="/linux/secure-nginx-with-let-s-encrypt-on-ubuntu-18-04/">这些说明</a>安装免费的Let&rsquo;s加密SSL证书。</li>
</ul>

<p>为了能够访问Magento 2代码库，您需要生成身份验证密钥。如果您没有Magento Marketplace帐户，可以<a href="https://www.magentocommerce.com/products/applications/customer/create/">在此处</a>创建一个帐户。一旦创建了帐户，请检查<a href="https://devdocs.magento.com/guides/v2.3/install-gde/prereq/connect-auth.html">这些说明</a>了如何生成新的认证密钥。</p>

<p>将系统软件包更新到最新版本并安装<a href="/linux/how-to-unzip-files-in-linux/">解压缩实用程序</a>：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo apt update &amp;&amp; sudo apt upgradesudo apt install unzip</code></pre></div>
<h2 id="创建mysql数据库">创建MySQL数据库</h2>

<p>如果您的服务器上安装了<a href="/linux/how-to-install-mysql-on-ubuntu-18-04/">MySQL</a>或<a href="/linux/how-to-install-mariadb-on-ubuntu-18-04/">MariaDB</a>，则可以跳过此步骤，否则可以通过键入以下命令从Ubuntu的默认存储库安装MySQL 5.7服务器包：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo apt install mysql-server mysql-client</code></pre></div>
<p>对于全新的MySQL安装，建议运行该<code>mysql_secure_installation</code>命令以提高MySQL服务器的安全性。</p>

<p>使用以下命令登录MySQL shell：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo mysql</code></pre></div>
<p>在MySQL shell中，运行以下SQL语句以<a href="/linux/how-to-create-a-mysql-database/">创建</a>名为<a href="/linux/how-to-create-a-mysql-database/">的新数据库</a><code>magento</code>：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-mysql" data-lang="console-mysql">CREATE DATABASE magento;</code></pre></div>
<p>接下来，创建一个名为的MySQL用户帐户，<code>magento</code>并通过运行以下命令<a href="/linux/how-to-create-mysql-user-accounts-and-grant-privileges/">向用户授予必要的权限</a>：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-mysql" data-lang="console-mysql">GRANT ALL ON magento.* TO &#39;magento&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;change-with-strong-password&#39;;</code></pre></div>
<p>确保<code>change-with-strong-password</code>使用强密码进行更改。</p>

<p>完成后，键入以下命令退出MySQL控制台：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-mysql" data-lang="console-mysql">EXIT;</code></pre></div>
<h2 id="创建系统用户">创建系统用户</h2>

<p><a href="/linux/how-to-create-users-in-linux-using-the-useradd-command/">创建一个新的用户</a>和组，它将是Magento文件系统所有者，为简单起见，我们将为用户命名<code>magento</code>：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo useradd -m -U -r -d /opt/magento magento</code></pre></div>
<p>将<code>www-data</code>用户添加到<code>magento</code>组并更改<code>/opt/magento</code>目录权限，以便Nginx可以访问Magento安装：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo usermod -a -G magento www-datasudo chmod 750 /opt/magento</code></pre></div>
<h2 id="安装和配置php">安装和配置PHP</h2>

<p><a href="/linux/how-to-install-php-on-ubuntu-18-04/">PHP 7.2</a>是Ubuntu 18.04中的默认PHP版本，完全支持并推荐用于Magento 2.3。由于我们将使用Nginx作为Web服务器，因此我们还将安装PHP-FPM软件包。</p>

<p>运行以下命令以安装PHP和所有必需的PHP模块：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo apt install php7.2-common php7.2-cli php7.2-fpm php7.2-opcache php7.2-gd php7.2-mysql php7.2-curl php7.2-intl php7.2-xsl php7.2-mbstring php7.2-zip php7.2-bcmath php7.2-soap</code></pre></div>
<p>安装过程完成后，PHP-FPM服务将自动启动，您可以通过打印服务状态来验证它：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo systemctl status php7.2-fpm</code></pre></div>
<p>输出应指示fpm服务处于活动状态并正在运行。</p>
<div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">● php7.2-fpm.service - The PHP 7.2 FastCGI Process Manager
   Loaded: loaded (/lib/systemd/system/php7.2-fpm.service; enabled; vendor preset: enabled)
   Active: active (running) since Wed 2018-12-12 15:47:16 UTC; 5s ago
     Docs: man:php-fpm7.2(8)
 Main PID: 16814 (php-fpm7.2)
   Status: &#34;Ready to handle connections&#34;
    Tasks: 3 (limit: 505)
   CGroup: /system.slice/php7.2-fpm.service</code></pre></div>
<p>设置必需和推荐的PHP选项：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo sed -i &#34;s/memory_limit = .*/memory_limit = 1024M/&#34; /etc/php/7.2/fpm/php.inisudo sed -i &#34;s/upload_max_filesize = .*/upload_max_filesize = 256M/&#34; /etc/php/7.2/fpm/php.inisudo sed -i &#34;s/zlib.output_compression = .*/zlib.output_compression = on/&#34; /etc/php/7.2/fpm/php.inisudo sed -i &#34;s/max_execution_time = .*/max_execution_time = 18000/&#34; /etc/php/7.2/fpm/php.inisudo sed -i &#34;s/;date.timezone.*/date.timezone = UTC/&#34; /etc/php/7.2/fpm/php.inisudo sed -i &#34;s/;opcache.save_comments.*/opcache.save_comments = 1/&#34; /etc/php/7.2/fpm/php.ini</code></pre></div>
<p>接下来，我们需要为<code>magento</code>用户创建FPM池。</p>

<p>打开文本编辑器并创建以下文件：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo nano /etc/php/7.2/fpm/pool.d/magento.conf</code></pre></div>
<p>/etc/php/7.2/fpm/pool.d/magento.conf</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[magento]</span>
<span class="na">user</span> <span class="o">=</span> <span class="s">magento</span>
<span class="na">group</span> <span class="o">=</span> <span class="s">www-data</span>
<span class="na">listen.owner</span> <span class="o">=</span> <span class="s">magento</span>
<span class="na">listen.group</span> <span class="o">=</span> <span class="s">www-data</span>
<span class="na">listen</span> <span class="o">=</span> <span class="s">/var/run/php/php7.2-fpm-magento.sock</span>
<span class="na">pm</span> <span class="o">=</span> <span class="s">ondemand</span>
<span class="na">pm.max_children</span> <span class="o">=</span>  <span class="s">50</span>
<span class="na">pm.process_idle_timeout</span> <span class="o">=</span> <span class="s">10s</span>
<span class="na">pm.max_requests</span> <span class="o">=</span> <span class="s">500</span>
<span class="na">chdir</span> <span class="o">=</span> <span class="s">/</span></code></pre></div>
<p>重新启动PHP-FPM服务以使更改生效：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">systemctl restart php7.2-fpm</code></pre></div>
<p>通过运行以下<a href="/linux/how-to-list-files-in-linux-using-the-ls-command/">ls命令</a>验证是否已成功创建PHP套接字：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">ls -al /var/run/php/php7.2-fpm-magento.sock</code></pre></div>
<p>输出应该如下所示：</p>
<div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">srw-rw---- 1 magento www-data 0 Dec 12 16:07 /var/run/php/php7.2-fpm-magento.sock=</code></pre></div>
<h2 id="安装composer">安装Composer</h2>

<p>Composer是PHP的依赖管理器，我们将使用它来下载Magento核心并安装所有必需的Magento组件。</p>

<p>要全局<a href="/linux/how-to-install-and-use-composer-on-ubuntu-18-04/">安装composer</a>，请使用<a href="/linux/curl-command-examples/">curl</a>下载Composer安装程序并将文件移动到以下<code>/usr/local/bin</code>目录：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer</code></pre></div>
<p>通过打印composer版本验证安装：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">composer --version</code></pre></div>
<p>输出应该如下所示：</p>
<div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">Composer version 1.8.0 2018-12-03 10:31:16</code></pre></div>
<h2 id="安装magento">安装Magento</h2>

<p>有几种方法可以安装Magento 2.避免从Github存储库安装Magento，因为该版本用于开发而不是用于生产安装。</p>

<p>在撰写本文时，Magento的最新稳定版本是版本<code>2.3.0</code>。在本教程中，我们将使用composer从其存储库安装Magento。</p>

<p><code>magento</code>键入以下命令切换到用户：</p>
<div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">sudo su - magento</code></pre></div>
<p>通过将magento文件下载到/ opt / magento / public_html目录来开始安装：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">composer create-project --repository-url=https://repo.magento.com/ magento/project-community-edition /opt/magento/public_html</code></pre></div>
<p>系统将提示您输入访问密钥，从Magento marketplace帐户复制密钥并将其存储在<code>auth.json</code>文件中，因此稍后在更新安装时，您不必再次添加相同的密钥。</p>
<div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">    Authentication required (repo.magento.com):
      Username: e758ec1745d190320ca246e4e832e12c
      Password: 
Do you want to store credentials for repo.magento.com in /opt/magento/.config/composer/auth.json ? [Yn] Y</code></pre></div>
<p>上面的命令将获取所有必需的PHP包。该过程可能需要几分钟，如果成功，则输出结束应如下所示：</p>
<div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">Writing lock file
Generating autoload files</code></pre></div>
<p>创建项目后，我们可以启动Magento安装。我们可以从命令行或使用Web安装向导安装Magento。在本教程中，我们将使用命令行安装Magento。</p>

<p>我们将使用以下选项来安装Magento商店：</p>

<ul>
<li>Base和Base安全URL设置为<code>https://example.com</code>，使用您的域进行更改。</li>
<li>Magento管理员：

<ul>
<li><code>John</code> <code>Doe</code> 作为名字和姓氏。</li>
<li><code>john@example.com</code> 电子邮件。</li>
<li><code>john</code>作为用户名和<code>j0hnP4ssvv0rD</code>密码。</li>
</ul></li>
<li>数据库名称<code>magento</code>，用户名<code>magento</code>，密码<code>change-with-strong-password</code>和数据库服务器与Web服务器位于同一主机上。</li>
<li><code>en_US</code>，美国英语作为默认语言。</li>
<li><code>USD</code> 美元作为默认货币。</li>
<li><code>America/Chicago</code> 作为一个时区。</li>
</ul>

<p>您可以<a href="https://devdocs.magento.com/guides/v2.3/install-gde/install/cli/install-cli-install.html">在此处</a>找到所有安装选项。</p>

<p>切换到Magento <code>~/public_html</code>目录：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">cd ~/public_html</code></pre></div>
<p>运行以下命令以开始安装：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">php bin/magento setup:install --base-url<span class="o">=</span>https://example.com/ <span class="se">\
</span><span class="se"></span>        --base-url-secure<span class="o">=</span>https://example.com/ <span class="se">\
</span><span class="se"></span>        --admin-firstname<span class="o">=</span><span class="s2">&#34;John&#34;</span> <span class="se">\
</span><span class="se"></span>        --admin-lastname<span class="o">=</span><span class="s2">&#34;Doe&#34;</span> <span class="se">\
</span><span class="se"></span>        --admin-email<span class="o">=</span><span class="s2">&#34;john@example.com&#34;</span> <span class="se">\
</span><span class="se"></span>        --admin-user<span class="o">=</span><span class="s2">&#34;john&#34;</span> <span class="se">\
</span><span class="se"></span>        --admin-password<span class="o">=</span><span class="s2">&#34;j0hnP4ssvv0rD&#34;</span> <span class="se">\
</span><span class="se"></span>        --db-name<span class="o">=</span><span class="s2">&#34;magento&#34;</span> <span class="se">\
</span><span class="se"></span>        --db-host<span class="o">=</span><span class="s2">&#34;localhost&#34;</span> <span class="se">\
</span><span class="se"></span>        --db-user<span class="o">=</span><span class="s2">&#34;magento&#34;</span> <span class="se">\
</span><span class="se"></span>        --currency<span class="o">=</span>USD <span class="se">\
</span><span class="se"></span>        --timezone<span class="o">=</span>America/Chicago <span class="se">\
</span><span class="se"></span>        --use-rewrites<span class="o">=</span><span class="m">1</span> <span class="se">\
</span><span class="se"></span>        --db-password<span class="o">=</span><span class="s2">&#34;change-with-strong-password&#34;</span></code></pre></div>
<p>不要忘记将密码（<code>j0hnP4ssvv0rD</code>）更改为更安全的密码。</p>

<p>此过程可能需要几分钟时间，一旦完成，您将看到一条消息，其中包含Magento管理仪表板的URI。</p>
<div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">[Progress: 773 / 773]
[SUCCESS]: Magento installation complete.
[SUCCESS]: Magento Admin URI: /admin_13nv5k
Nothing to import.</code></pre></div>
<h2 id="创建magento-crontab">创建Magento crontab</h2>

<p>Magento使用cron作业来安排重新索引，通知，站点地图，电子邮件等任务。</p>

<p>要创建Magento crontab，请以<code>magento</code>用户身份运行以下命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">php ~/public_html/bin/magento cron:install</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">Crontab has been generated and saved</code></pre></div>
<p>键入以下命令验证是否已安装crontab：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">crontab -l</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">#~ MAGENTO START adc062915d7b30804a2b340095af072d
* * * * * /usr/bin/php7.2 /opt/magento/public_html/bin/magento cron:run 2&gt;&amp;1 | grep -v &#34;Ran jobs by schedule&#34; &gt;&gt; /opt/magento/public_html/var/log/magento.cron.log
* * * * * /usr/bin/php7.2 /opt/magento/public_html/update/cron.php &gt;&gt; /opt/magento/public_html/var/log/update.cron.log
* * * * * /usr/bin/php7.2 /opt/magento/public_html/bin/magento setup:cron:run &gt;&gt; /opt/magento/public_html/var/log/setup.cron.log
#~ MAGENTO END adc062915d7b30804a2b340095af072d</code></pre></div>
<h2 id="配置nginx">配置Nginx</h2>

<p>到目前为止，您应该已经在Ubuntu服务器上安装了具有SSL证书的Nginx，如果没有检查本教程的先决条件。</p>

<p>我们将包含Magento附带的默认Nginx配置。</p>

<p>切换到您的sudo用户，打开文本编辑器并创建以下文件：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash-console" data-lang="bash-console">sudo nano /etc/nginx/sites-available/example.com</code></pre></div>
<p>/etc/nginx/sites-available/example.com</p>
<div class="highlight"><pre class="chroma"><code class="language-nginx" data-lang="nginx"><span class="k">upstream</span> <span class="s">fastcgi_backend</span> <span class="p">{</span>
  <span class="kn">server</span>   <span class="s">unix:/var/run/php/php7.2-fpm-magento.sock</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">example.com</span> <span class="s">www.example.com</span><span class="p">;</span>

    <span class="kn">include</span> <span class="s">snippets/letsencrypt.conf</span><span class="p">;</span>
    <span class="kn">return</span> <span class="mi">301</span> <span class="s">https://example.com</span><span class="nv">$request_uri</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span> <span class="s">http2</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">www.example.com</span><span class="p">;</span>

    <span class="kn">ssl_certificate</span> <span class="s">/etc/letsencrypt/live/example.com/fullchain.pem</span><span class="p">;</span>
    <span class="kn">ssl_certificate_key</span> <span class="s">/etc/letsencrypt/live/example.com/privkey.pem</span><span class="p">;</span>
    <span class="kn">ssl_trusted_certificate</span> <span class="s">/etc/letsencrypt/live/example.com/chain.pem</span><span class="p">;</span>
    <span class="kn">include</span> <span class="s">snippets/ssl.conf</span><span class="p">;</span>
    <span class="kn">include</span> <span class="s">snippets/letsencrypt.conf</span><span class="p">;</span>

    <span class="kn">return</span> <span class="mi">301</span> <span class="s">https://example.com</span><span class="nv">$request_uri</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">443</span> <span class="s">ssl</span> <span class="s">http2</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">example.com</span><span class="p">;</span>

    <span class="kn">ssl_certificate</span> <span class="s">/etc/letsencrypt/live/example.com/fullchain.pem</span><span class="p">;</span>
    <span class="kn">ssl_certificate_key</span> <span class="s">/etc/letsencrypt/live/example.com/privkey.pem</span><span class="p">;</span>
    <span class="kn">ssl_trusted_certificate</span> <span class="s">/etc/letsencrypt/live/example.com/chain.pem</span><span class="p">;</span>
    <span class="kn">include</span> <span class="s">snippets/ssl.conf</span><span class="p">;</span>
    <span class="kn">include</span> <span class="s">snippets/letsencrypt.conf</span><span class="p">;</span>

    <span class="kn">set</span> <span class="nv">$MAGE_ROOT</span> <span class="s">/opt/magento/public_html</span><span class="p">;</span>
    <span class="kn">set</span> <span class="nv">$MAGE_MODE</span> <span class="s">developer</span><span class="p">;</span> <span class="c1"># or production
</span><span class="c1"></span>
    <span class="kn">access_log</span> <span class="s">/var/log/nginx/example.com-access.log</span><span class="p">;</span>
    <span class="kn">error_log</span> <span class="s">/var/log/nginx/example.com-error.log</span><span class="p">;</span>

    <span class="kn">include</span> <span class="s">/opt/magento/public_html/nginx.conf.sample</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>不要忘记将example.com替换为Magento域，并设置SSL证书文件的正确路径。此配置中使用的片段在<a href="/linux/secure-nginx-with-let-s-encrypt-on-ubuntu-18-04/">本指南</a>中创建。</p>

<p>在重新启动Nginx服务之前，请进行测试以确保没有语法错误：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo nginx -t</code></pre></div>
<p>如果没有错误，输出应如下所示：</p>
<div class="highlight"><pre class="chroma"><code class="language-output" data-lang="output">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful</code></pre></div>
<p>最后，键入以下命令重启Nginx服务：</p>
<div class="highlight"><pre class="chroma"><code class="language-console-bash" data-lang="console-bash">sudo systemctl restart nginx</code></pre></div>
<h2 id="验证安装">验证安装</h2>

<p>打开浏览器，键入您的域并假设安装成功，将出现类似于以下内容的屏幕：</p>

<p><img src="/images/linux/how-to-install-magento-2-on-ubuntu-18-04/ubuntu-magento.jpg" alt="" /></p>

<p>您现在可以转到Magento Admin URI，以admin用户身份登录并开始自定义新的Magento安装。</p>

<h2 id="结论">结论</h2>

<p>恭喜，您已在Ubuntu 18.04服务器上成功安装了Magento 2.3。您现在可以开始自定义您的商店了。</p>

<p><a href="https://devdocs.magento.com/#/individual-contributors">Magento 2.3开发人员文档</a>是一个很好的起点，可以了解有关如何管理Magento安装的更多信息。</p></div><ul class="pa0">
  
   <li class="list di">
     <a href="/tags/ubuntu" class="link f5 grow no-underline br2 ba ph3 pv2 mb3 mr2 dib white bg-white sans-serif">ubuntu</a>
   </li>
  
   <li class="list di">
     <a href="/tags/magento" class="link f5 grow no-underline br2 ba ph3 pv2 mb3 mr2 dib white bg-white sans-serif">magento</a>
   </li>
  
   <li class="list di">
     <a href="/tags/mysql" class="link f5 grow no-underline br2 ba ph3 pv2 mb3 mr2 dib white bg-white sans-serif">mysql</a>
   </li>
  
   <li class="list di">
     <a href="/tags/mariadb" class="link f5 grow no-underline br2 ba ph3 pv2 mb3 mr2 dib white bg-white sans-serif">mariadb</a>
   </li>
  
   <li class="list di">
     <a href="/tags/php" class="link f5 grow no-underline br2 ba ph3 pv2 mb3 mr2 dib white bg-white sans-serif">php</a>
   </li>
  
   <li class="list di">
     <a href="/tags/nginx" class="link f5 grow no-underline br2 ba ph3 pv2 mb3 mr2 dib white bg-white sans-serif">nginx</a>
   </li>
  
   <li class="list di">
     <a href="/tags/composer" class="link f5 grow no-underline br2 ba ph3 pv2 mb3 mr2 dib white bg-white sans-serif">composer</a>
   </li>
  
   <li class="list di">
     <a href="/tags/ecommerce" class="link f5 grow no-underline br2 ba ph3 pv2 mb3 mr2 dib white bg-white sans-serif">ecommerce</a>
   </li>
  
</ul>
<div class="mt6">
        
      </div>
    </section>

    <aside class="w-30-l">
      <div class="sticky"><div class="x-toc bg-light-gray pa3 nested-list-reset nested-links f5">
    <p class="f5 b mb3">文章目录</p>
      <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#先决条件">先决条件</a></li>
<li><a href="#创建mysql数据库">创建MySQL数据库</a></li>
<li><a href="#创建系统用户">创建系统用户</a></li>
<li><a href="#安装和配置php">安装和配置PHP</a></li>
<li><a href="#安装composer">安装Composer</a></li>
<li><a href="#安装magento">安装Magento</a></li>
<li><a href="#创建magento-crontab">创建Magento crontab</a></li>
<li><a href="#配置nginx">配置Nginx</a></li>
<li><a href="#验证安装">验证安装</a></li>
<li><a href="#结论">结论</a></li>
</ul></li>
</ul>
</nav>
  </div>




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">相关阅读</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/linux/how-to-install-opencart-on-ubuntu-18-04/">如何在Ubuntu 18.04上安装OpenCart</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-install-phpmyadmin-with-nginx-on-ubuntu-18-04/">如何在Ubuntu 18.04上安装带有Nginx的phpMyAdmin</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-install-phpmyadmin-with-nginx-on-centos-7/">如何在CentOS 7上安装带有Nginx的phpMyAdmin</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-install-wordpress-with-nginx-on-ubuntu-18-04/">如何在 Ubuntu 18.04 上安装带有 Nginx 的 WordPress</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-install-drupal-on-centos-7/">如何在 CentOS 7 上安装 Drupal</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-install-and-secure-phpmyadmin-with-apache-on-centos-7/">如何在CentOS 7上使用Apache安装和保护phpMyAdmin</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-install-wordpress-with-nginx-on-centos-7/">如何在CentOS 7上使用Nginx安装WordPress</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-install-and-configure-redmine-on-centos-7/">如何在CentOS 7上安装和配置Redmine</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-install-and-secure-phpmyadmin-with-apache-on-debian-9/">如何在Debian 9上使用Apache安装和保护phpMyAdmin</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/linux/how-to-install-laravel-on-ubuntu-18-04/">如何在Ubuntu 18.04上安装Laravel</a>
        </li>
	    
    </ul>
</div>

</div>
    </aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="/" >
    &copy; 2019 不争笔记
  </a>
    <div>










</div>
  </div>
</footer>

    

  <script src="/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
